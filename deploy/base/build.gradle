/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */
def group="base"
def dMake="airenas/ubuntu.make:1.0"
def dJava="airenas/ubuntu.make:1.0"

def dockerBuild(context, dir, tag) {
    context.commandLine 'docker', 'build', '-t', name, dir
}

task docker_build_make(type: Exec, group: group, description: "Build ubuntu make image") {
    dockerBuild(delegate, 'ubuntu.make', dMake)
}

task docker_push_make(type: Exec, group: group, description: "Push docker ubuntu make image to cloud") {
    commandLine 'docker', 'push', dMake
    dependsOn docker_build_make
}

task docker_build_java(type: Exec, group: group, description: "Build ubuntu java image") {
    dockerBuild(delegate, 'ubuntu.make.java8', dJava)
}

task docker_push_java(type: Exec, group: group, description: "Push docker ubuntu java image to cloud") {
    commandLine 'docker', 'push', dJava
    dependsOn docker_build_java
}
